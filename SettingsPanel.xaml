<UserControl x:Class="HelloWorldLeChat.SettingsPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:HelloWorldLeChat"
             Width="300">
    <!-- Utilisez les ressources au niveau du UserControl pour le convertisseur -->
    <!-- Ce code ne fonctionne pas :
        <UserControl.Resources>
            <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        </UserControl.Resources>
        Selon Claude IA :
            Le préfixe local: indique à WPF qu'il doit rechercher la classe BooleanToVisibilityConverter dans l'espace de noms défini par le préfixe local, qui est déclaré dans l'en-tête du XAML
            comme: xmlns:local="clr-namespace:HelloWorldLeChat"
            Maintenant, on utilise le convertisseur BooleanToVisibilityConverter qui est intégré à WPF et qui se trouve dans l'espace de noms System.Windows.Data.
    -->
    
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>

    <!-- Conteneur principal avec ombre pour l'effet de profondeur -->
    <Border Background="White" 
            BorderThickness="1,0,0,0" 
            BorderBrush="#DDDDDD">
        <Border.Effect>
            <DropShadowEffect BlurRadius="10" ShadowDepth="-5" 
                              Opacity="0.3" Color="#000000"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Barre de titre -->
                <RowDefinition Height="*"/>
                <!-- Contenu -->
                <RowDefinition Height="Auto"/>
                <!-- Boutons d'action -->
            </Grid.RowDefinitions>

            <!-- Barre de titre -->
            <Border Grid.Row="0" Background="#2979FF">
                <!-- Utilisez Border ou autre contenant avec Padding au lieu de Grid -->
                <Border Padding="15,12">
                    <Grid>
                        <TextBlock Text="Paramètres" 
                                   Foreground="White" 
                                   FontWeight="Medium"
                                   FontSize="16" 
                                   VerticalAlignment="Center"/>
                        <Button x:Name="CloseSettingsButton" 
                                HorizontalAlignment="Right" 
                                Width="24" Height="24"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="White"
                                Cursor="Hand"
                                ToolTip="Fermer le panneau des paramètres">
                            <Path Data="M 0,0 L 10,10 M 0,10 L 10,0" 
                                  Stroke="White" 
                                  StrokeThickness="2" 
                                  Stretch="Uniform" 
                                  Margin="5"/>
                        </Button>
                    </Grid>
                </Border>
            </Border>

            <!-- Contenu du panneau : paramètres -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <!-- Section Fenêtre de chargement -->
                    <TextBlock Text="FENÊTRE DE CHARGEMENT" 
                               Foreground="#757575" 
                               FontWeight="SemiBold"
                               Margin="0,0,0,10"/>

                    <!-- Option d'affichage de la popup LoadWindow -->
                    <DockPanel LastChildFill="False" Margin="0,5,0,15">
                        <TextBlock Text="Afficher la popup LoadWindow" 
                                   Foreground="#212121" 
                                   DockPanel.Dock="Left"
                                   VerticalAlignment="Center"/>
                        <CheckBox x:Name="ShowLoadWindowCheckBox" 
                                  DockPanel.Dock="Right" 
                                  IsChecked="{Binding ShowLoadingPopup}"
                                  VerticalAlignment="Center"
                                  Margin="5,0,0,0">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1.2" ScaleY="1.2"/>
                            </CheckBox.LayoutTransform>
                        </CheckBox>
                    </DockPanel>

                    <!-- Option de sauvegarde des paramètres -->
                    <DockPanel LastChildFill="False" Margin="0,5,0,15">
                        <TextBlock Text="Sauvegarder les paramètres" 
                                   Foreground="#212121" 
                                   DockPanel.Dock="Left"
                                   VerticalAlignment="Center"/>
                        <CheckBox x:Name="SaveSettingsCheckBox" 
                                  DockPanel.Dock="Right" 
                                  IsChecked="{Binding SaveSettings}"
                                  VerticalAlignment="Center"
                                  Margin="5,0,0,0">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1.2" ScaleY="1.2"/>
                            </CheckBox.LayoutTransform>
                        </CheckBox>
                    </DockPanel>

                    <!-- Séparateur -->
                    <Separator Margin="0,5,0,15" Background="#E0E0E0"/>

                    <!-- Section Dimensions de la fenêtre -->
                    <TextBlock Text="DIMENSIONS DE LA FENÊTRE" 
                               Foreground="#757575" 
                               FontWeight="SemiBold"
                               Margin="0,0,0,10"/>

                    <!-- Option d'aperçu en temps réel -->
                    <DockPanel LastChildFill="False" Margin="0,5,0,15">
                        <TextBlock Text="Aperçu en temps réel" 
                                   Foreground="#212121" 
                                   DockPanel.Dock="Left"
                                   VerticalAlignment="Center"/>
                        <CheckBox x:Name="LivePreviewCheckBox" 
                                  DockPanel.Dock="Right" 
                                  IsChecked="{Binding LivePreview}"
                                  VerticalAlignment="Center"
                                  Margin="5,0,0,0">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1.2" ScaleY="1.2"/>
                            </CheckBox.LayoutTransform>
                        </CheckBox>
                    </DockPanel>

                    <!-- Largeur de la fenêtre -->
                    <TextBlock Text="Largeur" Foreground="#212121" Margin="0,5,0,5"/>
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <Slider x:Name="WidthSlider" 
                                Grid.Column="0"
                                Minimum="300" 
                                Maximum="2000"
                                Value="{Binding WindowWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                TickFrequency="100"
                                TickPlacement="None"
                                IsSnapToTickEnabled="True"
                                Margin="0,0,10,0"/>

                        <TextBox x:Name="WidthTextBox" 
                                 Grid.Column="1"
                                 Text="{Binding WindowWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 VerticalAlignment="Center"
                                 TextAlignment="Center"
                                 Padding="5,2"/>
                    </Grid>

                    <!-- Hauteur de la fenêtre -->
                    <TextBlock Text="Hauteur" Foreground="#212121" Margin="0,5,0,5"/>
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <Slider x:Name="HeightSlider" 
                                Grid.Column="0"
                                Minimum="200" 
                                Maximum="1200"
                                Value="{Binding WindowHeight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                TickFrequency="50"
                                TickPlacement="None"
                                IsSnapToTickEnabled="True"
                                Margin="0,0,10,0"/>

                        <TextBox x:Name="HeightTextBox" 
                                 Grid.Column="1"
                                 Text="{Binding WindowHeight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 VerticalAlignment="Center"
                                 TextAlignment="Center"
                                 Padding="5,2"/>
                    </Grid>

                    <!-- Limites et contraintes -->
                    <DockPanel LastChildFill="False" Margin="0,5,0,15">
                        <TextBlock Text="Ajuster automatiquement" 
                                   Foreground="#212121" 
                                   DockPanel.Dock="Left"
                                   ToolTip="Ajuster automatiquement les dimensions pour rester dans les limites de l'écran"
                                   VerticalAlignment="Center"/>
                        <CheckBox x:Name="AutoAdjustCheckBox" 
                                  DockPanel.Dock="Right" 
                                  IsChecked="{Binding AutoAdjust}"
                                  VerticalAlignment="Center"
                                  Margin="5,0,0,0">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1.2" ScaleY="1.2"/>
                            </CheckBox.LayoutTransform>
                        </CheckBox>
                    </DockPanel>

                    <!-- Indicateur d'écran actuel -->
                    <Border Background="#F5F5F5" Padding="10" CornerRadius="4">
                        <StackPanel>
                            <TextBlock Text="Informations d'écran" 
                                       FontWeight="Medium" 
                                       Foreground="#424242"
                                       Margin="0,0,0,5"/>
                            <TextBlock x:Name="ScreenInfoText" 
                                       Text="{Binding CurrentScreenInfo}"
                                       TextWrapping="Wrap" 
                                       Foreground="#616161"/>
                            <TextBlock x:Name="WarningText" 
                                       Text="{Binding ScreenWarning}"
                                       TextWrapping="Wrap" 
                                       Foreground="#E53935"
                                       Visibility="{Binding HasScreenWarning, Converter={StaticResource BooleanToVisibilityConverter}}"
                                       Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Boutons d'action -->
            <Border Grid.Row="2" Background="#F5F5F5">
                <!-- Utilisez Border avec Padding au lieu de Grid avec Padding -->
                <Border Padding="15,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <Button x:Name="ResetButton" 
                                Content="Réinitialiser" 
                                Grid.Column="0"
                                Padding="12,6" 
                                Margin="0,0,8,0"
                                Background="White" 
                                BorderBrush="#DDDDDD"
                                Foreground="#757575"/>

                        <Button x:Name="ApplyButton" 
                                Content="Appliquer" 
                                Grid.Column="1"
                                Padding="12,6" 
                                Background="#2979FF" 
                                BorderBrush="#2979FF"
                                Foreground="White"/>
                    </Grid>
                </Border>
            </Border>
        </Grid>
    </Border>
</UserControl>                                 