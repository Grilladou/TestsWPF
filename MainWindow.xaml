<Window x:Class="HelloWorldLeChat.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System.Windows.Data;assembly=PresentationFramework"
        xmlns:local="clr-namespace:HelloWorldLeChat"
        Title="MainWindow" Height="450" Width="500">
    <Window.Resources>
        <!-- Convertisseurs -->
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>

        <!-- Animation d'ouverture du panneau -->
        <Storyboard x:Key="OpenSettingsPanel">
            <ThicknessAnimation 
                Storyboard.TargetName="SettingsPanelContainer" 
                Storyboard.TargetProperty="Margin" 
                From="0,0,-300,0" To="0,0,0,0" 
                Duration="0:0:0.3">
                <ThicknessAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
        </Storyboard>

        <!-- Animation de fermeture du panneau -->
        <Storyboard x:Key="CloseSettingsPanel">
            <ThicknessAnimation 
                Storyboard.TargetName="SettingsPanelContainer" 
                Storyboard.TargetProperty="Margin" 
                From="0,0,0,0" To="0,0,-300,0" 
                Duration="0:0:0.3">
                <ThicknessAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
        </Storyboard>
    </Window.Resources>

    <!-- Grid principal qui contient toute l'interface -->
    <Grid>
        <!-- Contenu principal de l'application -->
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Titre avec bouton de paramètres -->
            <Grid Grid.Row="0">
                <TextBlock HorizontalAlignment="Center" 
                           FontSize="24" 
                           Margin="0,20,0,20">
                    Hello, World!
                </TextBlock>
                <Button x:Name="SettingsButton"
                        Content="⚙️"
                        Width="30"
                        Height="30"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="0,10,0,0"
                        ToolTip="Paramètres"
                        Background="Transparent"
                        BorderThickness="0" />
            </Grid>

            <!-- Boutons d'information en 2x2 -->
            <Grid Grid.Row="1" Margin="0,0,0,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Première ligne de boutons -->
                <Button Grid.Row="0" Grid.Column="0"
                        Content="Infos système" 
                        Width="150" 
                        Margin="5"
                        Click="ShowOSInfo_Click"/>

                <Button Grid.Row="0" Grid.Column="1" 
                        Content="Infos matériel" 
                        Width="150"
                        Margin="5"
                        Click="ShowHardwareInfo_Click"/>

                <!-- Deuxième ligne de boutons -->
                <Button Grid.Row="1" Grid.Column="0" 
                        Content="Infos utilisateur" 
                        Width="150"
                        Margin="5"
                        Click="ShowUserInfo_Click"/>

                <Button Grid.Row="1" Grid.Column="1" 
                        Content="Nombre d'écrans" 
                        Width="150" 
                        Margin="5"
                        Click="ShowScreenCount_Click"/>
            </Grid>

            <!-- Conteneur pour TextBox et bouton STOP -->
            <Grid Grid.Row="2" Margin="0,10,0,10">
                <!-- Zone de texte pour le rapport -->
                <TextBox x:Name="reportTextBox" 
                         TextWrapping="Wrap"
                         FontFamily="Consolas"
                         FontSize="12" 
                         VerticalScrollBarVisibility="Auto"
                         AcceptsReturn="True"/>

                <!-- Bouton STOP positionné au centre par-dessus le TextBox -->
                <Button x:Name="MainStopButton"
                        Content="STOP"
                        Width="50" 
                        Height="50"
                        Foreground="White"
                        FontWeight="Bold"
                        Visibility="Collapsed"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Panel.ZIndex="100">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Grid>
                                <!-- Ombre externe pour l'effet de profondeur -->
                                <Ellipse Fill="#990000" Margin="0,2,0,0" />

                                <!-- Cercle principal -->
                                <Ellipse x:Name="ButtonEllipse" Fill="Red">
                                    <Ellipse.Effect>
                                        <DropShadowEffect Color="Black" Direction="320" 
                                          ShadowDepth="3" Opacity="0.5" 
                                          BlurRadius="4"/>
                                    </Ellipse.Effect>
                                </Ellipse>

                                <!-- Effet de brillance (highlight) -->
                                <Ellipse>
                                    <Ellipse.Fill>
                                        <RadialGradientBrush Center="0.3,0.3" RadiusX="0.7" RadiusY="0.7">
                                            <GradientStop Color="#40FFFFFF" Offset="0"/>
                                            <GradientStop Color="#00FFFFFF" Offset="1"/>
                                        </RadialGradientBrush>
                                    </Ellipse.Fill>
                                </Ellipse>

                                <!-- Texte du bouton -->
                                <ContentPresenter HorizontalAlignment="Center" 
                                  VerticalAlignment="Center"/>
                            </Grid>

                            <!-- Animation lors du clic -->
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="ButtonEllipse" Property="Fill" Value="#CC0000"/>
                                    <Setter TargetName="ButtonEllipse" Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect Color="Black" Direction="320" 
                                              ShadowDepth="1" Opacity="0.5" 
                                              BlurRadius="2"/>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ButtonEllipse" Property="Fill" Value="#FF3333"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>

            <!-- Bouton de fermeture -->
            <Button Grid.Row="3" 
                    Content="Fermer" 
                    HorizontalAlignment="Center" 
                    Width="100" 
                    Margin="0,10,0,0"
                    Click="CloseButton_Click"/>
        </Grid>

        <!-- Overlay pour les paramètres (semi-transparent) -->
        <Grid x:Name="SettingsOverlay" 
              Visibility="Collapsed" 
              Panel.ZIndex="100"
              Background="#80000000"
              MouseDown="SettingsOverlay_MouseDown">
        </Grid>

        <!-- Conteneur du panneau des paramètres -->
        <Grid x:Name="SettingsPanelContainer" 
              HorizontalAlignment="Right" 
              Panel.ZIndex="101"
              Margin="0,0,-300,0">
            <local:SettingsPanel x:Name="SettingsPanel" />
        </Grid>
    </Grid>
</Window>